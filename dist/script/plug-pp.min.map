{"version":3,"file":"plug-pp.min.js","sources":["plug-pp.js"],"names":["define","$","_","Version","ModificationAPI","ResourceLoader","Class","POLL_RATES","UPDATE_CHECK","CACHE","notificationVersion","QUEUE_NOTIFICATION_CACHE","extend","options","components","autoWoot","autoJoin","moderator","historyNotification","notification","desktopNotification","delay","stylesheet","timers","updateCheck","timeouts","ui","user","init","this","verifyAPI","JSON","parse","getStorage","registerTimers","registerEvents","injectUI","notifyChat","debug","getUser","username","message","console","get","Math","floor","random","append","hasPermission","getRole","addClass","isNotificationAvailable","click","proxy","hasClass","vote","votePositive","removeClass","saveOptions","joinWaitList","notifyRequestPermissions","onChat","data","type","notifyImportant","from","onDjAdvance","window","clearTimeout","setTimeout","dj","id","history","getHistory","each","index","value","media","length","onHistoryUpdate","API","getNextMedia","inHistory","notify","title","registerEvent","DJ_ADVANCE","CHAT","HISTORY_UPDATE","setInterval","setStorage","stringify","shutdown","remove","unregisterTimers","unregisterEvents","requirejs","undef","PlugPP","skipHistoryTrack","getDJ","moderateSkip","sendChat","unregisterEvent","clearInterval","ajax","dataType","jsonpCallback","success","newVersion","undefined","enabled","info","Context","PopoutView","cleanMessage","allowedTags","tagRegex","replace","a","b","indexOf","toLowerCase","clearChat","_window","document","find","html","scrollTop","key","ROLE","toUpperCase","isStorageAvailable","localStorage","getItem","userID","role","Notification","error","wlIndex","icon","trigger","color","$chat","scrollPosition","scrollHeight","height","$message","$text","css","toRGB","body","callback","denyCallback","permission","requestPermission","eventName","context","on","setItem","off","BaseURL","category","resource","getBaseUrl","require","element","name","mapping","obj","xhr","errorString","exceptionString"],"mappings":"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"}